{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/components/button.css') }}">
    <link rel="stylesheet" href="{{ asset('styles/blocks/hero.css') }}">
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="module" src="{{ asset('controllers/heroScroll.js') }}" defer></script>
{% endblock %}

{% block body %}
    <section class="hero">
        <img class="hero__image" src="/images/hero-placeholder.jpg" alt="" />
        <div class="hero__container">
            <h1 class="hero__title">Mobile Dog Grooming in {{ city.name }} â€” We Come to You!</h1>
            <p class="hero__subtitle">Browse vetted local groomers that come straight to your doorstep.</p>
            <button class="hero__cta btn btn--accent" type="button" data-scroll-target="#groomer-listings">Find a Groomer Now</button>
        </div>
    </section>

    <section id="groomer-listings">
        <h2>Groomers in {{ city.name }} for {{ service.name }}</h2>
        <form method="get" autocomplete="off">
            <label for="rating">Minimum rating:</label>
            <select id="rating" name="rating">
                <option value="">Any</option>
                {% for i in 5..1 %}
                    <option value="{{ i }}"{% if rating == i %} selected{% endif %}>{{ i }}+</option>
                {% endfor %}
            </select>
            <button type="submit">Filter</button>
        </form>
        {% if groomers %}
            <ul>
            {% for groomer in groomers %}
                <li><a href="/groomers/{{ groomer.slug }}">{{ groomer.businessName }}</a></li>
            {% endfor %}
            </ul>
            <div class="pagination">
                {% if previousOffset is not null %}
                    <a href="?offset={{ previousOffset }}{% if rating %}&rating={{ rating }}{% endif %}">Previous</a>
                {% endif %}
                {% if nextOffset is not null %}
                    <a href="?offset={{ nextOffset }}{% if rating %}&rating={{ rating }}{% endif %}">Next</a>
                {% endif %}
            </div>
        {% else %}
            <p>No results yet.</p>
        {% endif %}
    </section>
{% endblock %}
