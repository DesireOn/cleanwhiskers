{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/blocks/city-list.css') }}">
    <link rel="stylesheet" href="{{ asset('styles/blocks/faq.css') }}">
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="module" src="{{ asset('js/faq-accordion.js') }}" defer></script>
    <script type="module" src="{{ asset('js/form-enhance.js') }}" defer></script>
    {% if captcha_provider is defined and captcha_provider|lower != 'none' and captcha_provider|length > 0 %}
        {% if captcha_provider|lower in ['recaptcha', 'google'] %}
            <script src="https://www.google.com/recaptcha/api.js" async defer></script>
        {% elseif captcha_provider|lower == 'hcaptcha' %}
            <script src="https://hcaptcha.com/1/api.js" async defer></script>
        {% endif %}
    {% endif %}
{% endblock %}

{% block body %}
  <div class="city-landing" data-route="app_groomer_list_by_city_service">
    <section class="city-hero" aria-labelledby="city-hero-title">
      <div class="city-hero__grid">
        <div class="city-hero__content">
          <p class="city-hero__eyebrow">Concierge mobile grooming in {{ city.name }}</p>
          <h1 id="city-hero-title" class="city-hero__title">
            Grooming shouldn't stress you or your pet. Let our service handle it.
          </h1>
          <p class="city-hero__tagline">One tap. One match. One fresh, happy pet.</p>
          <p class="city-hero__lede">
            Get connected with trusted mobile groomers near you in {{ city.name }} and save your pet (and yourself) the hassle of the salon trip.
          </p>

          <ul class="city-hero__highlights" aria-label="Why pet parents choose CleanWhiskers">
            <li class="city-hero__highlight">Tailored matches with vetted, mobile professionals</li>
            <li class="city-hero__highlight">We coordinate schedules so you can relax before the groom</li>
            <li class="city-hero__highlight">Care guidance for anxious, senior, and special-care pets</li>
          </ul>
        </div>

        <div class="city-hero__form" id="get-started">
          <div class="city-hero__form-card" role="group" aria-label="Request a tailored quote">
            <h2 class="city-hero__form-title">Start your {{ service.name|lower }} quote</h2>
            <p class="city-hero__form-subtitle">We’ll introduce you to the groomer who can take great care of your pet.</p>

            <form class="lead-capture-form" method="post" action="/lead" novalidate>
              <input type="hidden" name="city" value="{{ city.slug }}" />
              <input type="hidden" name="service" value="{{ service.slug }}" />

              <div class="form-field">
                <label class="form-label" for="lead-full-name">Full Name</label>
                <input class="form-input" type="text" id="lead-full-name" name="full_name" placeholder="Your full name" autocomplete="name" required />
              </div>

              <div class="form-field">
                <label class="form-label" for="lead-phone">Phone Number</label>
                <input class="form-input" type="tel" id="lead-phone" name="phone" placeholder="(555) 123-4567" inputmode="tel" autocomplete="tel" required pattern="^[0-9+().\\s-]{7,}$" title="Use digits and symbols like + ( ) -" aria-describedby="lead-phone-hint" />
                <div id="lead-phone-hint" class="field-hint">We’ll only use this to connect you with a groomer.</div>
              </div>

              <div class="form-field">
                <label class="form-label" for="lead-email">Email (optional)</label>
                <input class="form-input" type="email" id="lead-email" name="email" placeholder="you@example.com" autocomplete="email" aria-describedby="lead-email-hint" />
                <div id="lead-email-hint" class="field-hint">Helpful for sharing quotes and appointment updates.</div>
              </div>

              <div class="form-field">
                <label class="form-label" for="lead-pet-type">Pet Type</label>
                <select class="form-input" id="lead-pet-type" name="pet_type" required>
                  <option value="" disabled selected>Select pet type</option>
                  <option value="dog">Dog</option>
                  <option value="cat">Cat</option>
                </select>
              </div>

              <div class="form-field">
                <label class="form-label" for="lead-notes">Care Notes</label>
                <textarea class="form-input form-textarea" id="lead-notes" name="breed_size" rows="3" placeholder="Add coat type, grooming goals, timing, or special handling"></textarea>
              </div>

              <div class="visually-hidden" aria-hidden="true" style="position:absolute; left:-10000px;">
                <label for="lead-website">Website</label>
                <input type="text" id="lead-website" name="website" tabindex="-1" autocomplete="off" />
              </div>

              <div class="form-field form-field--checkbox">
                <label class="form-label" for="lead-consent">
                  <input type="checkbox" id="lead-consent" name="consent_to_share" required />
                  I agree that CleanWhiskers may share my request and contact details with local groomers for this quote.
                </label>
              </div>

              {% if captcha_provider is defined and captcha_provider|lower != 'none' and captcha_provider|length > 0 %}
                <div class="form-field captcha-field">
                  {% if captcha_provider|lower in ['recaptcha', 'google'] %}
                    <div class="g-recaptcha" data-sitekey="{{ recaptcha_site_key|default('') }}" data-theme="light"></div>
                  {% elseif captcha_provider|lower == 'hcaptcha' %}
                    <div class="h-captcha" data-sitekey="{{ hcaptcha_site_key|default('') }}" data-theme="light"></div>
                  {% endif %}
                </div>
              {% endif %}

              <button type="submit" class="btn btn--accent form-submit" aria-describedby="lead-privacy-note">Get My Concierge Match</button>

              <p id="lead-privacy-note" class="form-privacy">
                By submitting, you agree to our
                <a href="{{ path('app_terms') }}">Terms</a>
                and acknowledge our
                <a href="{{ path('app_privacy') }}">Privacy Policy</a>.
                {% if captcha_provider is defined and captcha_provider|lower != 'none' and captcha_provider|length > 0 %}
                  {% if captcha_provider|lower in ['recaptcha', 'google'] %}
                    This site is protected by reCAPTCHA and the Google
                    <a href="https://policies.google.com/privacy" rel="noopener noreferrer" target="_blank">Privacy Policy</a>
                    and
                    <a href="https://policies.google.com/terms" rel="noopener noreferrer" target="_blank">Terms of Service</a>
                    apply.
                  {% elseif captcha_provider|lower == 'hcaptcha' %}
                    This site is protected by hCaptcha and its
                    <a href="https://www.hcaptcha.com/privacy" rel="noopener noreferrer" target="_blank">Privacy Policy</a>
                    and
                    <a href="https://www.hcaptcha.com/terms" rel="noopener noreferrer" target="_blank">Terms of Service</a>
                    apply.
                  {% endif %}
                {% endif %}
              </p>
            </form>
          </div>

          <ul class="city-hero__trust" aria-label="Service commitments">
            <li>Vetted {{ city.name }} professionals</li>
            <li>Concierge outreach included</li>
            <li>No-obligation quotes</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="city-benefits" aria-labelledby="city-benefits-title">
      <div class="city-section__inner">
        <div class="city-benefits__halo" aria-hidden="true"></div>

        <div class="city-benefits__intro">
          <span class="city-benefits__kicker">Concierge-level assurance</span>
          <h2 id="city-benefits-title" class="city-section__heading">Why pet parents trust CleanWhiskers</h2>
          <p class="city-section__lede">Because your time is valuable. We handle the outreach, shortlisting, and follow-up so you can keep your routine running smoothly.</p>

          <ul class="city-benefits__stats" aria-label="CleanWhiskers service highlights">
            <li>Hand-reviewed mobile grooming partners</li>
            <li>1:1 concierge follow-up on every request</li>
            <li>Secure scheduling with proactive reminders</li>
          </ul>
        </div>

        <div class="city-benefits__grid">
          <article class="benefit-card" data-accent="coordination">
            <span class="benefit-card__icon" aria-hidden="true">
              <svg viewBox="0 0 48 48" focusable="false">
                <circle cx="24" cy="24" r="20" fill="none" stroke="currentColor" stroke-width="2.5"></circle>
                <path d="M16 24l6 6 12-12" fill="none" stroke="currentColor" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </span>
            <h3 class="benefit-card__title">Concierge coordination</h3>
            <p class="benefit-card__copy">We contact the groomers for you, track who’s available, and make sure only serious professionals reach out. Enter your info once and reclaim the hours you’d normally spend coordinating.</p>
          </article>

          <article class="benefit-card" data-accent="matching">
            <span class="benefit-card__icon" aria-hidden="true">
              <svg viewBox="0 0 48 48" focusable="false">
                <path d="M16 10h8v8h-8zM24 18h8v8h-8zM16 26h8v8h-8z" fill="none" stroke="currentColor" stroke-width="3" stroke-linejoin="round"></path>
                <path d="M12 14l-4 4m28-12l8 8m-20 12l-8 8" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"></path>
              </svg>
            </span>
            <h3 class="benefit-card__title">Tailored matching</h3>
            <p class="benefit-card__copy">Unlike generic directories, we personalise every request — matching you with groomers equipped for your pet’s coat, temperament, and lifestyle.</p>
          </article>

          <article class="benefit-card" data-accent="care">
            <span class="benefit-card__icon" aria-hidden="true">
              <svg viewBox="0 0 48 48" focusable="false">
                <path d="M24 32c6 0 12-4 12-10a10 10 0 0 0-10-10l-2 2-2-2a10 10 0 0 0-10 10c0 6 6 10 12 10z" fill="none" stroke="currentColor" stroke-width="3" stroke-linejoin="round"></path>
                <path d="M18 28c1.4 1.6 3.4 2.6 6 2.6 2.6 0 4.6-1 6-2.6" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"></path>
              </svg>
            </span>
            <h3 class="benefit-card__title">Specialised care</h3>
            <p class="benefit-card__copy">Worried about anxious pups, double coats, or senior cats? We factor all of that in before passing the lead along, so only groomers who actually handle those needs will pick it up.</p>
          </article>

          <article class="benefit-card" data-accent="vetting">
            <span class="benefit-card__icon" aria-hidden="true">
              <svg viewBox="0 0 48 48" focusable="false">
                <path d="M10 18l14-8 14 8v10c0 8-6 12-14 16-8-4-14-8-14-16z" fill="none" stroke="currentColor" stroke-width="3" stroke-linejoin="round"></path>
                <path d="M18 24l4 4 8-8" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </span>
            <h3 class="benefit-card__title">Vetted professionals</h3>
            <p class="benefit-card__copy">Every groomer profile is reviewed by our team and continuously rated by pet owners like you. If standards slip, we pause sending new requests.</p>
          </article>

          <article class="benefit-card" data-accent="assurance">
            <span class="benefit-card__icon" aria-hidden="true">
              <svg viewBox="0 0 48 48" focusable="false">
                <circle cx="16" cy="18" r="6" fill="none" stroke="currentColor" stroke-width="3"></circle>
                <path d="M10 34c0-5 4-8 6-8s6 3 6 8" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path>
                <path d="M26 28h12" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path>
                <path d="M26 36h16" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path>
              </svg>
            </span>
            <h3 class="benefit-card__title">Peace of mind</h3>
            <p class="benefit-card__copy">You’re not just booking grooming — you’re buying reliability and more quality time with your pet. Picture welcoming them back home fresh and relaxed without rearranging your day.</p>
          </article>

          <article class="benefit-card" data-accent="experience">
            <span class="benefit-card__icon" aria-hidden="true">
              <svg viewBox="0 0 48 48" focusable="false">
                <path d="M10 30h28M14 24l10-12 10 12" fill="none" stroke="currentColor" stroke-width="3" stroke-linejoin="round"></path>
                <path d="M18 34l6 4 6-4" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </span>
            <h3 class="benefit-card__title">Streamlined experience</h3>
            <p class="benefit-card__copy">We’ve simplified everything — from quote submission to groomer coordination — to deliver premium mobile grooming without the fuss.</p>
          </article>
        </div>
      </div>
    </section>

    <section class="city-process" aria-labelledby="city-process-title">
      <div class="city-section__inner">
        <header class="city-process__header">
          <span class="city-process__eyebrow">The CleanWhiskers flow</span>
          <h2 id="city-process-title" class="city-section__heading">Here’s how it feels to book with us</h2>
          <p class="city-process__lede">From first click to fresh fur, we guide every step so you can focus on the cuddle session afterwards.</p>
        </header>

        <div class="city-process__grid" role="list">
          <article class="process-step" role="listitem">
            <div class="process-step__badge" aria-hidden="true">
              <span class="process-step__number">1</span>
              <span class="process-step__label">Share</span>
            </div>
            <div class="process-step__body">
              <h3 class="process-step__title">Tell us what your pet needs</h3>
              <p class="process-step__copy">Tell us your schedule, pet details, and any special requests — we broadcast the opportunity to groomers who love working with pets like yours.</p>
            </div>
          </article>

          <article class="process-step" role="listitem">
            <div class="process-step__badge" aria-hidden="true">
              <span class="process-step__number">2</span>
              <span class="process-step__label">Match</span>
            </div>
            <div class="process-step__body">
              <h3 class="process-step__title">We coordinate the response</h3>
              <p class="process-step__copy">Our team handles the outreach, tracks who’s available, and ensures only vetted groomers who fit your brief can claim the request.</p>
            </div>
          </article>

          <article class="process-step" role="listitem">
            <div class="process-step__badge" aria-hidden="true">
              <span class="process-step__number">3</span>
              <span class="process-step__label">Enjoy</span>
            </div>
            <div class="process-step__body">
              <h3 class="process-step__title">You confirm and relax</h3>
              <p class="process-step__copy">Once a groomer claims your request, you’ll connect directly to confirm the appointment. They bring the equipment — you enjoy the calm, freshly groomed pet.</p>
            </div>
          </article>
        </div>
      </div>
    </section>

    <section class="city-cta city-cta--primary" aria-labelledby="city-cta-primary-title">
      <div class="city-section__inner">
        <div class="city-cta__content">
          <div class="city-cta__card">
            <span class="city-cta__badge">Mobile grooming, on your terms</span>
            <h2 id="city-cta-primary-title">Ready to give your pet salon-quality care without leaving home?</h2>
            <p>Let CleanWhiskers introduce you to the right {{ city.name }} mobile groomer today.</p>
            <ul class="city-cta__highlights" role="list">
              <li class="city-cta__highlight">
                <span class="city-cta__highlight-icon" aria-hidden="true">🚐</span>
                <span>Same-week appointments across {{ city.name }}</span>
              </li>
              <li class="city-cta__highlight">
                <span class="city-cta__highlight-icon" aria-hidden="true">🛁</span>
                <span>Tailored care plans for every coat and temperament</span>
              </li>
              <li class="city-cta__highlight">
                <span class="city-cta__highlight-icon" aria-hidden="true">💬</span>
                <span>Concierge follow-up so you only meet trusted groomers</span>
              </li>
            </ul>
            <a class="btn btn--accent city-cta__button" href="#get-started">Start Your Quote</a>
            <p class="city-cta__footnote">No spam — just curated matches from groomers who travel to you.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="faq-section city-faq" aria-labelledby="city-faq-title">
      <header class="faq__header">
        <span class="faq__eyebrow">Need-to-know basics</span>
        <h2 id="city-faq-title">Frequently asked questions</h2>
        <p class="faq__subtitle">Helpful answers for {{ city.name }} pet parents exploring mobile grooming.</p>
        <p id="faq-copy-status" class="faq__status" aria-live="polite"></p>
      </header>

      <div class="faq__list" role="list">
        <details class="faq__item" id="faq-presence">
          <summary class="faq__question">
            <span>Do I need to be home?</span>
            <a class="faq__anchor" href="#faq-presence" data-faq-anchor aria-label="Copy link to this question">🔗</a>
            <svg class="faq__chevron" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true"><path d="M5 7l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </summary>
          <div class="faq__answer">
            <p>Most groomers prefer you (or a trusted adult) to be there for handoff and pick-up, but they’ll confirm what works when they accept your request.</p>
          </div>
        </details>

        <details class="faq__item" id="faq-supplies">
          <summary class="faq__question">
            <span>Do I provide grooming supplies?</span>
            <a class="faq__anchor" href="#faq-supplies" data-faq-anchor aria-label="Copy link to this question">🔗</a>
            <svg class="faq__chevron" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true"><path d="M5 7l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </summary>
          <div class="faq__answer">
            <p>Mobile groomers bring their own equipment and products. If your pet needs something specific — hypoallergenic shampoo or calming aids — mention it in the quote form or during the follow-up.</p>
          </div>
        </details>

        <details class="faq__item" id="faq-judged">
          <summary class="faq__question">
            <span>Will I feel judged?</span>
            <a class="faq__anchor" href="#faq-judged" data-faq-anchor aria-label="Copy link to this question">🔗</a>
            <svg class="faq__chevron" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true"><path d="M5 7l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </summary>
          <div class="faq__answer">
            <p>Not here. These groomers are professionals who work with all breeds, coat conditions, and grooming histories. Their focus is on comfort and care, not criticism.</p>
          </div>
        </details>

        <details class="faq__item" id="faq-marketplace">
          <summary class="faq__question">
            <span>Why not just use a marketplace?</span>
            <a class="faq__anchor" href="#faq-marketplace" data-faq-anchor aria-label="Copy link to this question">🔗</a>
            <svg class="faq__chevron" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true"><path d="M5 7l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </summary>
          <div class="faq__answer">
            <p>Marketplaces can be noisy and unpredictable. We only share your details with groomers who’ve already demonstrated prompt responses and solid owner feedback, so you spend less time sifting and more time getting results.</p>
          </div>
        </details>

        <details class="faq__item" id="faq-ease">
          <summary class="faq__question">
            <span>Will this really make my life easier?</span>
            <a class="faq__anchor" href="#faq-ease" data-faq-anchor aria-label="Copy link to this question">🔗</a>
            <svg class="faq__chevron" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true"><path d="M5 7l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </summary>
          <div class="faq__answer">
            <p>Clients tell us the difference shows the moment the grooming van arrives outside their door. No travel, no waiting rooms — just a calm pet and a tidy home.</p>
          </div>
        </details>
      </div>
    </section>

    <section class="city-cta city-cta--secondary" aria-labelledby="city-cta-secondary-title">
      <div class="city-section__inner">
        <div class="city-cta__content">
          <div class="city-cta__card city-cta__card--secondary">
            <span class="city-cta__badge city-cta__badge--secondary">Concierge support included</span>
            <h2 id="city-cta-secondary-title">Try CleanWhiskers today and discover the easiest path to a freshly groomed pet — right here in {{ city.name }}.</h2>
            <p>Share your pet’s needs once and our team coordinates the perfect {{ city.name }} grooming match from start to finish.</p>
            <ul class="city-cta__highlights" role="list">
              <li class="city-cta__highlight">
                <span class="city-cta__highlight-icon" aria-hidden="true">📋</span>
                <span>Hand-vetted groomers with availability updates in real time</span>
              </li>
              <li class="city-cta__highlight">
                <span class="city-cta__highlight-icon" aria-hidden="true">🐾</span>
                <span>Comfort-first grooming plans for anxious or senior pets</span>
              </li>
              <li class="city-cta__highlight">
                <span class="city-cta__highlight-icon" aria-hidden="true">☎️</span>
                <span>Your concierge stays in touch until the appointment is confirmed</span>
              </li>
            </ul>
            <a class="btn btn--accent city-cta__button" href="#get-started">Claim Your Concierge Quote</a>
            <p class="city-cta__footnote">We follow up quickly — typically within one business day.</p>
          </div>
        </div>
      </div>
    </section>
  </div>
{% endblock %}
