{% extends 'base.html.twig' %}

{% block title %}Claim Link Invalid{% endblock %}

{% block body %}
  <section class="container" style="max-width:720px;margin:2rem auto;">
    <h1>We couldn’t verify your claim link</h1>
    <p>
      {% if reason == 'expired' %}
        This link has expired. For security, claim links are time-limited.
      {% elseif reason == 'invalid_signature' %}
        The link signature is invalid. It may have been modified or is incomplete.
      {% elseif reason == 'missing_params' %}
        The link is missing required information.
      {% elseif reason == 'not_found' %}
        We couldn’t find a matching lead for this link.
      {% elseif reason == 'cooldown' %}
        You claimed a lead recently. To prevent hoarding, please wait before claiming another.
        {% if cooldown_until is defined and cooldown_until %}
          You can try again after {{ cooldown_until|date('H:i, M j') }}.
        {% endif %}
      {% elseif reason == 'needs_profile' %}
        You’re logged in but don’t have a groomer profile yet. Create your profile to claim leads.
      {% else %}
        The link appears invalid. Please try again.
      {% endif %}
    </p>

    <div style="margin-top:1.25rem;">
      <a class="btn" href="{{ path('app_homepage') }}">Go to Homepage</a>
      <a class="btn" style="margin-left:.75rem;" href="{{ path('app_register', { role: 'groomer' }) }}">Register as Groomer</a>
      {% if reason == 'needs_profile' and is_granted('ROLE_GROOMER') %}
        <a class="btn" style="margin-left:.75rem;" href="{{ path('groomer_onboarding') }}">Create Groomer Profile</a>
      {% endif %}
    </div>
  </section>
{% endblock %}
